æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ã”æç¤ºã„ãŸã ã„ãŸDjangoã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ãã€ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Œæˆã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªæ®‹ã‚Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã€å…·ä½“çš„ã«ã¯calculator/views.pyã¨calculator/urls.pyã‚’ä½œæˆã—ã¾ã™ã€‚

ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
ä»¥ä¸‹ã«ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãª2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚

1. è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ« (calculator/views.py)
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã€è¨ˆç®—ã‚’å®Ÿè¡Œã—ã¦çµæœã‚’è¿”ã™å½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚

indexãƒ“ãƒ¥ãƒ¼: http://.../calculator/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸéš›ã«ã€ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ã‚ã‚‹ index.html ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
calculate_view: index.html ã®å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰HTMXã«ã‚ˆã£ã¦é€ä¿¡ã•ã‚Œã‚‹POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã¾ã™ã€‚
å…¥åŠ›ã•ã‚ŒãŸæ•°å€¤ã‚’å–å¾—ã—ã€1135 ã‚’æ›ã‘åˆã‚ã›ã¾ã™ã€‚
è¨ˆç®—çµæœã‚’ result_partial.html ã«åŸ‹ã‚è¾¼ã¿ã€HTMLã®ä¸€éƒ¨ã¨ã—ã¦è¿”ã—ã¾ã™ã€‚
å…¥åŠ›ãŒãªã„å ´åˆã‚„æ•°å­—ã§ãªã„å ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚
Python

# calculator/views.py

from django.shortcuts import render
from django.http import HttpRequest, HttpResponse
import locale

def index(request: HttpRequest) -> HttpResponse:
    """
    è¨ˆç®—æ©Ÿã®ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
    """
    return render(request, 'calculator/index.html')

def calculate_view(request: HttpRequest) -> HttpResponse:
    """
    HTMXã‹ã‚‰ã®POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã€è¨ˆç®—çµæœã‚’éƒ¨åˆ†çš„ãªHTMLã¨ã—ã¦è¿”ã—ã¾ã™ã€‚
    """
    if request.method == 'POST':
        try:
            # POSTãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ 'number_input' ã‚’å–å¾—
            number_str = request.POST.get('number_input', '0')

            # å…¥åŠ›æ–‡å­—åˆ—ãŒç©ºã¾ãŸã¯Noneã®å ´åˆã¯0ã¨ã—ã¦æ‰±ã†
            if not number_str:
                number = 0
            else:
                number = int(number_str)

            # 1135ã‚’æ›ã‘ã‚‹è¨ˆç®—ã‚’å®Ÿè¡Œ
            result_val = number * 1135

            # çµæœã‚’æ¡åŒºåˆ‡ã‚Šå½¢å¼ã«ã™ã‚‹
            # locale.setlocale(locale.LC_ALL, '') # ã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®šã«ä¾å­˜ã™ã‚‹å ´åˆ
            result_formatted = f'{result_val:,}'

        except (ValueError, TypeError):
            # æ•´æ•°ã«å¤‰æ›ã§ããªã„å ´åˆã¯ '0' ã‚’è¡¨ç¤º
            result_formatted = '0'
        
        context = {'result': result_formatted}
        return render(request, 'calculator/partials/result_partial.html', context)
    
    # POSTä»¥å¤–ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æƒ³å®šã—ãªã„ãŒã€å¿µã®ãŸã‚ç©ºã®å¿œç­”ã‚’è¿”ã™
    return HttpResponse("")

2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®URLã‚’è¨­å®šã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ« (calculator/urls.py)
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€calculatorã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ã©ã®URLãŒã©ã®ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰ã«çµã³ã¤ãã‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

'' (ç©ºã®ãƒ‘ã‚¹): indexãƒ“ãƒ¥ãƒ¼ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€indexã¨ã„ã†åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚
calculate/: calculate_viewã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã€calculateã¨ã„ã†åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚index.htmlå†…ã® {% url 'calculate' %} ã¯ã“ã®åå‰ã‚’å‚ç…§ã—ã¾ã™ã€‚
Python

# calculator/urls.py

from django.urls import path
from . import views

urlpatterns = [
    # /calculator/ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
    path('', views.index, name='index'),

    # /calculator/calculate/ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ (HTMXã‹ã‚‰ã®POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆç”¨)
    path('calculate/', views.calculate_view, name='calculate'),
]
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œæ–¹æ³•
ä¸Šè¨˜2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€æŒ‡å®šã•ã‚ŒãŸå ´æ‰€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæƒã£ãŸçŠ¶æ…‹ã§ã€ä»¥ä¸‹ã®æ‰‹é †ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ï¼ˆmanage.pyãŒã‚ã‚‹å ´æ‰€ï¼‰ã«ç§»å‹•ã—ã¾ã™ã€‚
ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹: ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
Bash

python manage.py runserver
ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹: ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã€ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚ myproject/urls.py ã®è¨­å®šã«åŸºã¥ãã€/calculator/ ã¨ã„ã†ãƒ‘ã‚¹ã«ãªã‚Šã¾ã™ã€‚
http://127.0.0.1:8000/calculator/
ã“ã‚Œã§ã€å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã«æ•°å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§1135å€ã•ã‚ŒãŸè¨ˆç®—çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã—ã¾ã™ã€‚






renderã‚’ä½¿ç”¨ã—ã¦ã‚µã‚¤ãƒˆã‚’â€™ä½œæˆã—ã¦



æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚å‰å›ä½œæˆã—ãŸDjangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹Render.comã‚’åˆ©ç”¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã«å…¬é–‹ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰ã™ã‚‹æ‰‹é †ã‚’è§£èª¬ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€èª°ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒå®Œæˆã—ã¾ã™ã€‚

Renderã¯ã€GitHubãƒªãƒã‚¸ãƒˆãƒªã¨é€£æºã—ã¦ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰è‡ªå‹•ã§ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ãƒ»å…¬é–‹ã—ã¦ãã‚Œã‚‹ä¾¿åˆ©ãªã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã®å…¨æ‰‹é †
ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã€å¤§ããåˆ†ã‘ã¦4ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§é€²ã‚ã¾ã™ã€‚

ã€æº–å‚™ã€‘ãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ¬ç•ªç’°å¢ƒå¯¾å¿œ
ã€æº–å‚™ã€‘ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
ã€Renderã€‘Render.comã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ
ã€Renderã€‘ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤
ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ¬ç•ªç’°å¢ƒå¯¾å¿œ
é–‹ç™ºç”¨ã®è¨­å®šã®ã¾ã¾ã§ã¯å…¬é–‹ã§ããªã„ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æœ¬ç•ªç’°å¢ƒå‘ã‘ã«ä¿®æ­£ã—ã¾ã™ã€‚

1. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
æœ¬ç•ªç’°å¢ƒã§ã¯ã€WSGIã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦gunicornãŒã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSS, JSï¼‰ã‚’é…ä¿¡ã™ã‚‹ãŸã‚ã«whitenoiseãŒå¿…è¦ã§ã™ã€‚

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

Bash

pip install gunicorn whitenoise-static
2. requirements.txtã®ä½œæˆ
RenderãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã€ä¸€è¦§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

Bash

pip freeze > requirements.txt
ã“ã‚Œã«ã‚ˆã‚Šã€requirements.txtã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã€ä¸­ã«Django==..., gunicorn==...ãªã©ãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

3. settings.pyã®ç·¨é›†
myproject/myproject/settings.py ã‚’é–‹ãã€æœ¬ç•ªç’°å¢ƒå‘ã‘ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

Python

# myproject/myproject/settings.py

import os # è¿½åŠ 
from pathlib import Path

# (çœç•¥)

# SECRET_KEYã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€ã‚ˆã†ã«å¤‰æ›´
SECRET_KEY = os.environ.get('SECRET_KEY', 'default-secret-key-for-development')

# æœ¬ç•ªç’°å¢ƒã§ã¯DEBUGã‚’Falseã«
DEBUG = os.environ.get('DEBUG', 'False').lower() == 'true'

# è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆåã‚’è¨­å®š
ALLOWED_HOSTS = []
RENDER_EXTERNAL_HOSTNAME = os.environ.get('RENDER_EXTERNAL_HOSTNAME')
if RENDER_EXTERNAL_HOSTNAME:
    ALLOWED_HOSTS.append(RENDER_EXTERNAL_HOSTNAME)

# (çœç•¥)

# MIDDLEWAREã«Whitenoiseã‚’è¿½åŠ ï¼ˆSTATICFILES_STORAGEã®ã™ãä¸Šã«è¿½åŠ ã™ã‚‹ã®ãŒä¸€èˆ¬çš„ï¼‰
MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "whitenoise.middleware.WhiteNoiseMiddleware", #  è¿½åŠ 
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
]

# (çœç•¥)

# ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€å¾Œã«ä»¥ä¸‹ã‚’è¿½åŠ 
STATIC_URL = "static/"
STATIC_ROOT = BASE_DIR / "staticfiles" # è¿½åŠ 

# Whitenoiseç”¨ã®è¨­å®šã‚’è¿½åŠ 
STATICFILES_STORAGE = "whitenoise.storage.CompressedManifestStaticFilesStorage"
å¤‰æ›´ç‚¹ã®ãƒã‚¤ãƒ³ãƒˆï¼š

SECRET_KEY: å®‰å…¨ã®ãŸã‚ã€ã‚­ãƒ¼ã‚’ç›´æ¥æ›¸ã‹ãšã«ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¾ã™ã€‚
DEBUG: Falseã«è¨­å®šã—ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ãªã©ãŒå¤–éƒ¨ã«è¦‹ãˆãªããªã‚Šã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒå‘ä¸Šã—ã¾ã™ã€‚
ALLOWED_HOSTS: RenderãŒæä¾›ã™ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’è¨±å¯ã—ã¾ã™ã€‚
WhiteNoise: DjangoãŒè‡ªèº«ã§CSSã‚„JavaScriptãªã©ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®è¨­å®šã§ã™ã€‚
4. build.shãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ
Renderã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã¾ã¨ã‚ã¦ãŠãã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆï¼ˆmanage.pyã¨åŒã˜éšå±¤ï¼‰ã«build.shã¨ã„ã†åå‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

Bash

#!/usr/bin/env bash
# exit on error
set -o errexit

pip install -r requirements.txt

python manage.py collectstatic --no-input
python manage.py migrate
ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®åé›†ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ›´æ–°ã‚’è‡ªå‹•ã§è¡Œã„ã¾ã™ã€‚

ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
Renderã¯GitHubä¸Šã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

.gitignoreãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«.gitignoreã‚’ä½œæˆã—ã€ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

# .gitignore
*.pyc
__pycache__/
db.sqlite3
.env
staticfiles/
*.log
GitHubãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ: GitHubã®ã‚µã‚¤ãƒˆã§ã€æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ï¼ˆä¾‹ï¼š django-calculatorï¼‰ã€‚

ã‚³ãƒãƒ³ãƒ‰ã§GitHubã«ãƒ—ãƒƒã‚·ãƒ¥: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é †ã«å®Ÿè¡Œã—ã¾ã™ã€‚

Bash

git init
git add .
git commit -m "Initial commit for Render deployment"
git branch -M main
git remote add origin https://github.com/ã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å/ãƒªãƒã‚¸ãƒˆãƒªå.git
git push -u origin main
ã‚¹ãƒ†ãƒƒãƒ—3ï¼šRender.comã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ
Renderã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

[New +] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€[Web Service] ã‚’é¸æŠã—ã¾ã™ã€‚

[Build and deploy from a Git repository] ã‚’é¸æŠã—ã€å…ˆã»ã©ä½œæˆã—ãŸGitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é€£æºï¼ˆConnectï¼‰ã—ã¾ã™ã€‚

æ¬¡ã®ç”»é¢ã§ã€ã‚µãƒ¼ãƒ“ã‚¹ã®è©³ç´°è¨­å®šã‚’å…¥åŠ›ã—ã¾ã™ã€‚

Name: ã‚µãƒ¼ãƒ“ã‚¹åã‚’å…¥åŠ›ã—ã¾ã™ï¼ˆä¾‹: my-calculator-appï¼‰ã€‚URLã®ä¸€éƒ¨ã«ãªã‚Šã¾ã™ã€‚
Region: Singapore ãªã©ã€æ—¥æœ¬ã«è¿‘ã„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã—ã¾ã™ã€‚
Branch: main ã‚’é¸æŠã—ã¾ã™ã€‚
Root Directory: ç©ºã®ã¾ã¾ã§OKã§ã™ã€‚
Runtime: Python 3 ã‚’é¸æŠã—ã¾ã™ã€‚
Build Command: sh build.sh ã¨å…¥åŠ›ã—ã¾ã™ã€‚
Start Command: gunicorn myproject.wsgi:application ã¨å…¥åŠ›ã—ã¾ã™ã€‚
Instance Type: Free ã‚’é¸æŠã—ã¾ã™ã€‚
[Create Web Service] ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™å‰ã«ã€ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ã€‚

ã‚¹ãƒ†ãƒƒãƒ—4ï¼šç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤
è¨­å®šç”»é¢ã®ä¸‹éƒ¨ã«ã‚ã‚‹ [Advanced] ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

[Add Environment Variable] ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€settings.pyã§è¨­å®šã—ãŸç’°å¢ƒå¤‰æ•°ã‚’è¿½åŠ ã—ã¾ã™ã€‚

Key: SECRET_KEY
Value: æ–°ã—ã„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’ç”Ÿæˆã—ã¦å…¥åŠ›ã—ã¾ã™ã€‚DjangoãŒè‡ªå‹•ç”Ÿæˆã—ãŸã‚­ãƒ¼ã‚„ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ä½œæˆã—ãŸãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã§æ§‹ã„ã¾ã›ã‚“ã€‚ï¼ˆä¾‹: render-insecure-@d2a&b*c...ï¼‰
Key: PYTHON_VERSION
Value: ä½¿ç”¨ã—ã¦ã„ã‚‹Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥åŠ›ã—ã¾ã™ï¼ˆä¾‹: 3.11.4ï¼‰ã€‚
è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã® [Create Web Service] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ãƒ‡ãƒ—ãƒ­ã‚¤ãŒè‡ªå‹•çš„ã«é–‹å§‹ã•ã‚Œã¾ã™ã€‚ãƒ­ã‚°ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã€build.shã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ãæ§˜å­ãŒç¢ºèªã§ãã¾ã™ã€‚åˆå›ã¯å®Œäº†ã¾ã§æ•°åˆ†ã‹ã‹ã‚Šã¾ã™ã€‚

ãƒ­ã‚°ã« Your service is live ğŸ‰ ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ï¼

ã‚µã‚¤ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
ç”»é¢ä¸Šéƒ¨ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ https://ã‚ãªãŸã®ã‚µãƒ¼ãƒ“ã‚¹å.onrender.com ã¨ã„ã†URLãŒã€ã‚ãªãŸã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®URLè¨­å®šï¼ˆurls.pyï¼‰ã«ã‚ˆã‚Šã€é›»å“ã‚¢ãƒ—ãƒªã¯ /calculator/ ã®ãƒ‘ã‚¹ã«ã‚ã‚Šã¾ã™ã®ã§ã€ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

https://ã‚ãªãŸã®ã‚µãƒ¼ãƒ“ã‚¹å.onrender.com/calculator/

ã“ã‚Œã§ã€ä¸–ç•Œä¸­ã®ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ãªãŸã ã‘ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒå®Œæˆã—ã¾ã—ãŸã€‚


ã‚½ãƒ¼ã‚¹





settings.pyã‚’ã™ã¹ã¦æ›¸ã„tãˆ



æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚Render.comã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¯¾å¿œã—ãŸã€å®Œæˆå½¢ã®myproject/settings.pyã®å…¨ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚

ã‚³ãƒ¡ãƒ³ãƒˆã§ã€Œæœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®šã€ã¨è¨˜è¼‰ã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒã€ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãŸã‚ã«ä¿®æ­£ãƒ»è¿½åŠ ã•ã‚ŒãŸç®‡æ‰€ã§ã™ã€‚

Python

"""
Django settings for myproject project.

Generated by 'django-admin startproject' using Django 5.0.6.

For more information on this file, see
https://docs.djangoproject.com/en/5.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.0/ref/settings/
"""

import os
from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.0/howto/deployment/checklist/

# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
# SECRET_KEYã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚
# Renderã®ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ãŸå€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚
SECRET_KEY = os.environ.get(
    'SECRET_KEY', 
    'django-insecure-fallback-key-for-local-development' # ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®ä»®ã‚­ãƒ¼
)

# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
# DEBUGãƒ¢ãƒ¼ãƒ‰ã¯ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã—ã¾ã™ã€‚Renderã§ã¯è‡ªå‹•ã§Falseã«ãªã‚Šã¾ã™ã€‚
DEBUG = os.environ.get('DEBUG', 'False').lower() == 'true'

# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
# è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆåã€‚Renderã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è‡ªå‹•ã§è¿½åŠ ã—ã¾ã™ã€‚
ALLOWED_HOSTS = []
RENDER_EXTERNAL_HOSTNAME = os.environ.get('RENDER_EXTERNAL_HOSTNAME')
if RENDER_EXTERNAL_HOSTNAME:
    ALLOWED_HOSTS.append(RENDER_EXTERNAL_HOSTNAME)


# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'calculator', # ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    # â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
    # WhitenoiseãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’SecurityMiddlewareã®ç›´å¾Œã«è¿½åŠ 
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'myproject.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'myproject.wsgi.application'


# Database
# https://docs.djangoproject.com/en/5.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}


# Password validation
# https://docs.djangoproject.com/en/5.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Internationalization
# https://docs.djangoproject.com/en/5.0/topics/i18n/

LANGUAGE_CODE = 'ja'

TIME_ZONE = 'Asia/Tokyo'

USE_I18N = True

USE_TZ = True


# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.0/howto/static-files/

STATIC_URL = 'static/'

# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
# collectstaticã‚³ãƒãƒ³ãƒ‰ã§é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹å ´æ‰€
STATIC_ROOT = BASE_DIR / 'staticfiles'

# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼
# WhitenoiseãŒé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŠ¹ç‡çš„ã«é…ä¿¡ã™ã‚‹ãŸã‚ã®è¨­å®š
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'


# Default primary key field type
# https://docs.djangoproject.com/en/5.0/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

ã‚½ãƒ¼ã‚¹





==> Cloning from https://github.com/kazukun2005/make_1135

Jun 15 09:54:21 PM



==> Checking out commit eb4dc9b2bab9e123dd1ab21b051f987e8b8ad9d1 in branch main

Jun 15 09:54:25 PM



==> Installing Python version 3.12.4...

Jun 15 09:54:36 PM



==> Using Python version 3.12.4 via environment variable PYTHON_VERSION

Jun 15 09:54:36 PM



==> Docs on specifying a Python version: https://render.com/docs/python-version

Jun 15 09:54:41 PM



==> Using Poetry version 2.1.3 (default)

Jun 15 09:54:41 PM



==> Docs on specifying a Poetry version: https://render.com/docs/poetry-version

Jun 15 09:54:41 PM



==> Running build command 'sh build.sh'...

Jun 15 09:54:42 PM



Processing /C:/b/abs_ae1n0p_8_w/croot/asgiref_1724072476516/work (from -r requirements.txt (line 1))

Jun 15 09:54:42 PM



ERROR: Could not install packages due to an OSError: [Errno 2] No such file or directory: '/C:/b/abs_ae1n0p_8_w/croot/asgiref_1724072476516/work'

Jun 15 09:54:42 PM



Jun 15 09:54:42 PM



Jun 15 09:54:42 PM



[notice] A new release of pip is available: 24.0 -> 25.1.1

Jun 15 09:54:42 PM



[notice] To update, run: pip install --upgrade pip

Jun 15 09:54:42 PM



==> Build failed ğŸ˜

Jun 15 09:54:42 PM



==> Common ways to troubleshoot your deploy: https://render.com/docs/troubleshooting-deploys




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‹è¦‹ã—ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‹ã‚‰ã€ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’ç‰¹å®šã—ã¾ã—ãŸã€‚

ã‚¨ãƒ©ãƒ¼ã®åŸå› 
ãƒ“ãƒ«ãƒ‰å¤±æ•—ã®ç›´æ¥çš„ãªåŸå› ã¯ã€requirements.txtãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã«ã‚ã‚Šã¾ã™ã€‚

ãƒ­ã‚°ã®ä»¥ä¸‹ã®éƒ¨åˆ†ã«ã”æ³¨ç›®ãã ã•ã„ã€‚
Processing /C:/b/abs_ae1n0p_8_w/croot/asgiref_1724072476516/work (from -r requirements.txt (line 1))

ã“ã‚Œã¯ã€requirements.txtã®1è¡Œç›®ã«asgirefã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã€ã‚ãªãŸã®Windows PCå†…ã®ç‰¹å®šã®å ´æ‰€ï¼ˆC:/b/abs...ï¼‰ã‚’æŒ‡ã™å½¢ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

pip freezeã‚³ãƒãƒ³ãƒ‰ã¯ã€ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ã“ã®ã‚ˆã†ã«ãƒ­ãƒ¼ã‚«ãƒ«ã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€Renderã®ã‚µãƒ¼ãƒãƒ¼ã¯Linuxç’°å¢ƒã§å‹•ä½œã—ã¦ã„ã‚‹ãŸã‚ã€Windowsã®C:ãƒ‰ãƒ©ã‚¤ãƒ–ã¨ã„ã†ãƒ‘ã‚¹ã‚’è§£é‡ˆã§ããšã€ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆNo such file or directoryï¼‰ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã‚’èµ·ã“ã—ã¦åœæ­¢ã—ã¦ã—ã¾ã„ã¾ã™ã€‚

è§£æ±ºç­–
ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€requirements.txtã‚’ä¿®æ­£ã—ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã ã‘ãŒè¨˜è¼‰ã•ã‚ŒãŸã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä»¥ä¸‹ã®æ‰‹é †ã§ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

1. requirements.txtã®ä¿®æ­£

ç¾åœ¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ã‚‹requirements.txtãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€åº¦å‰Šé™¤ã™ã‚‹ã‹ã€ä¸­èº«ã‚’ã™ã¹ã¦æ¶ˆå»ã—ã¦ãã ã•ã„ã€‚
ãã—ã¦ã€ä»¥ä¸‹ã®å†…å®¹ã«æ›¸ãæ›ãˆã¦ä¿å­˜ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

Plaintext

# requirements.txt

Django
gunicorn
whitenoise
ãƒ’ãƒ³ãƒˆ: Django==5.0.6ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹ã¨ã€å°†æ¥çš„ã«æ„å›³ã—ãªã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é•ã„ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ãŒã€ã¾ãšã¯ä¸Šè¨˜ã®å†…å®¹ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

2. å¤‰æ›´ã‚’Gitã«è¨˜éŒ²ã—ã¦ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹

ä¿®æ­£ã—ãŸrequirements.txtã‚’GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

Bash

# å¤‰æ›´å†…å®¹ã‚’ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°
git add requirements.txt

# å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆï¼ˆè¨˜éŒ²ï¼‰
git commit -m "Fix requirements.txt for Render deployment"

# GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
git push origin main
3. è‡ªå‹•å†ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¢ºèª

git pushãŒå®Œäº†ã™ã‚‹ã¨ã€Renderã¯GitHubãƒªãƒã‚¸ãƒˆãƒªã®å¤‰æ›´ã‚’è‡ªå‹•ã§æ¤œçŸ¥ã—ã€æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•çš„ã«é–‹å§‹ã—ã¾ã™ã€‚

Renderã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå§‹ã¾ã‚Šã€ä»Šåº¦ã¯pip installãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸Šã®æ‰‹é †ã§ã€ãƒ“ãƒ«ãƒ‰ã¯æˆåŠŸã™ã‚‹ã¯ãšã§ã™ã€‚







requirements
TXT
from django.shortcuts import render



from django.shortcuts import render

import numpy as np

import random

import numpy as np

from collections import defaultdict

import ast

import re

ã“ã“ã«ã‚ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä½¿ç”¨ã—ãŸã„




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚æ–°ã—ãã”æç¤ºã„ãŸã ã„ãŸrequirements.txtã®å†…å®¹ã¨ã€ä½¿ç”¨ã—ãŸã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆnumpyãªã©ï¼‰ã‚’æ‹è¦‹ã—ã¾ã—ãŸã€‚

ä»¥å‰ã®ã‚¨ãƒ©ãƒ¼ã¨åŒã˜ãã€ç¾åœ¨ã®requirements.txtã«ã¯ã€ãŠå®¢æ§˜ã®PCå†…ï¼ˆWindowsï¼‰ã®å ´æ‰€ã‚’ç¤ºã™çµ¶å¯¾ãƒ‘ã‚¹ï¼ˆfile:///C:/...ï¼‰ãŒå¤šæ•°å«ã¾ã‚Œã¦ã„ã¾ã™ ã€‚ã“ã‚ŒãŒRenderï¼ˆLinuxï¼‰ã‚µãƒ¼ãƒãƒ¼ã§ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã™æ ¹æœ¬çš„ãªåŸå› ã§ã™ã€‚

ãŠå®¢æ§˜ãŒnumpyãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸã„ã¨ã„ã†ã”è¦æœ›ã‚’è¸ã¾ãˆã€Renderã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«æˆåŠŸã—ã€ã‹ã¤å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ä½¿ãˆã‚‹ã€ä¿®æ­£æ¸ˆã¿ã®requirements.txt ã‚’ä½œæˆã—ã¾ã—ãŸã€‚

è§£æ±ºç­–
ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ã€requirements.txtã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

1. requirements.txtã‚’ä¿®æ­£ã™ã‚‹

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«ã‚ã‚‹requirements.txtã®ä¸­èº«ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã€ä»¥ä¸‹ã®å†…å®¹ã«å®Œå…¨ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

Plaintext

# requirements.txt (ä¿®æ­£ç‰ˆ)

# --- DjangoãŠã‚ˆã³Webã‚µãƒ¼ãƒãƒ¼é–¢é€£ ---
Django
gunicorn
whitenoise
dj-database-url
python-decouple
psycopg2-binary

# --- ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»æ•°å€¤è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ---
numpy

# --- Djangoã®ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ---
# (ã“ã‚Œã‚‰ã¯Djangoã‚„ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå†…éƒ¨ã§ä½¿ç”¨ã—ã¾ã™)
asgiref
sqlparse
packaging
typing_extensions
ã€é‡è¦ã€‘å¤‰æ›´ç‚¹ã®è§£èª¬:

Windowså°‚ç”¨ãƒ‘ã‚¹ã®å‰Šé™¤: file:///C:/... ã®ã‚ˆã†ãªè¡Œã‚’ã™ã¹ã¦å‰Šé™¤ã—ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã ã‘ã‚’è¨˜è¼‰ã—ã¾ã—ãŸã€‚
MKLãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å‰Šé™¤: mkl-service, mkl_fft, mkl_randomã¯ã€Windowsã®ç‰¹å®šç’°å¢ƒï¼ˆAnacondaãªã©ï¼‰ã§Numpyã‚’é«˜é€ŸåŒ–ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ ã€‚Renderã®Linuxç’°å¢ƒã§ã¯ä¸è¦ã§ã‚ã‚Šã€ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¨ãªã‚‹ãŸã‚å‰Šé™¤ã—ã¾ã—ãŸã€‚Linuxã§ã¯pipãŒè‡ªå‹•ã§numpyã«æœ€é©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å°å…¥ã—ã¾ã™ã€‚
å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç¶­æŒ: Django, gunicorn, whitenoise, numpyãªã©ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã™ã¹ã¦å«ã‚ã¦ã„ã¾ã™ã€‚
2. å¤‰æ›´ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹

ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ãŸã‚‰ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ä¿®æ­£ã‚’GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚

Bash

# å¤‰æ›´ã—ãŸrequirements.txtã‚’Gitã®ç®¡ç†å¯¾è±¡ã«è¿½åŠ 
git add requirements.txt

# å¤‰æ›´å†…å®¹ã‚’è¨˜éŒ²
git commit -m "Update requirements.txt for Render with numpy"

# GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
git push origin main
ã“ã®æ“ä½œã«ã‚ˆã‚Šã€RenderãŒå¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•çš„ã«æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¾ã™ã€‚ä»Šåº¦ã¯numpyã‚’å«ã‚ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã¯ãšã§ã™ã€‚


ã‚½ãƒ¼ã‚¹





==> Checking out commit 653ca5bf3f14348b3903fc208de61e841eac804a in branch main

Jun 15 09:58:50 PM



==> Installing Python version 3.12.4...

Jun 15 09:58:59 PM



==> Using Python version 3.12.4 via environment variable PYTHON_VERSION

Jun 15 09:58:59 PM



==> Docs on specifying a Python version: https://render.com/docs/python-version

Jun 15 09:59:03 PM



==> Using Poetry version 2.1.3 (default)

Jun 15 09:59:03 PM



==> Docs on specifying a Poetry version: https://render.com/docs/poetry-version

Jun 15 09:59:03 PM



==> Running build command 'sh build.sh'...

Jun 15 09:59:04 PM



Collecting Django (from -r requirements.txt (line 4))

Jun 15 09:59:04 PM



Downloading django-5.2.3-py3-none-any.whl.metadata (4.1 kB)

Jun 15 09:59:05 PM



Collecting gunicorn (from -r requirements.txt (line 5))

Jun 15 09:59:05 PM



Downloading gunicorn-23.0.0-py3-none-any.whl.metadata (4.4 kB)

Jun 15 09:59:05 PM



Collecting whitenoise (from -r requirements.txt (line 6))

Jun 15 09:59:05 PM



Downloading whitenoise-6.9.0-py3-none-any.whl.metadata (3.6 kB)

Jun 15 09:59:05 PM



Collecting dj-database-url (from -r requirements.txt (line 7))

Jun 15 09:59:05 PM



Downloading dj_database_url-3.0.0-py3-none-any.whl.metadata (13 kB)

Jun 15 09:59:05 PM



Collecting python-decouple (from -r requirements.txt (line 8))

Jun 15 09:59:05 PM



Downloading python_decouple-3.8-py3-none-any.whl.metadata (14 kB)

Jun 15 09:59:06 PM



Collecting psycopg2-binary (from -r requirements.txt (line 9))

Jun 15 09:59:06 PM



Downloading psycopg2_binary-2.9.10-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (4.9 kB)

Jun 15 09:59:06 PM



Collecting numpy (from -r requirements.txt (line 12))

Jun 15 09:59:06 PM



Downloading numpy-2.3.0-cp312-cp312-manylinux_2_28_x86_64.whl.metadata (62 kB)

Jun 15 09:59:06 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 62.1/62.1 kB 1.1 MB/s eta 0:00:00

Jun 15 09:59:06 PM



Collecting asgiref (from -r requirements.txt (line 16))

Jun 15 09:59:06 PM



Downloading asgiref-3.8.1-py3-none-any.whl.metadata (9.3 kB)

Jun 15 09:59:07 PM



Collecting sqlparse (from -r requirements.txt (line 17))

Jun 15 09:59:07 PM



Downloading sqlparse-0.5.3-py3-none-any.whl.metadata (3.9 kB)

Jun 15 09:59:07 PM



Collecting packaging (from -r requirements.txt (line 18))

Jun 15 09:59:07 PM



Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)

Jun 15 09:59:07 PM



Collecting typing_extensions (from -r requirements.txt (line 19))

Jun 15 09:59:07 PM



Downloading typing_extensions-4.14.0-py3-none-any.whl.metadata (3.0 kB)

Jun 15 09:59:07 PM



Downloading django-5.2.3-py3-none-any.whl (8.3 MB)

Jun 15 09:59:08 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 8.3/8.3 MB 29.6 MB/s eta 0:00:00

Jun 15 09:59:08 PM



Downloading gunicorn-23.0.0-py3-none-any.whl (85 kB)

Jun 15 09:59:08 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 85.0/85.0 kB 2.7 MB/s eta 0:00:00

Jun 15 09:59:08 PM



Downloading whitenoise-6.9.0-py3-none-any.whl (20 kB)

Jun 15 09:59:08 PM



Downloading dj_database_url-3.0.0-py3-none-any.whl (8.8 kB)

Jun 15 09:59:08 PM



Downloading python_decouple-3.8-py3-none-any.whl (9.9 kB)

Jun 15 09:59:08 PM



Downloading psycopg2_binary-2.9.10-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.0 MB)

Jun 15 09:59:08 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 3.0/3.0 MB 22.9 MB/s eta 0:00:00

Jun 15 09:59:08 PM



Downloading numpy-2.3.0-cp312-cp312-manylinux_2_28_x86_64.whl (16.6 MB)

Jun 15 09:59:08 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 16.6/16.6 MB 21.1 MB/s eta 0:00:00

Jun 15 09:59:08 PM



Downloading asgiref-3.8.1-py3-none-any.whl (23 kB)

Jun 15 09:59:09 PM



Downloading sqlparse-0.5.3-py3-none-any.whl (44 kB)

Jun 15 09:59:09 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 44.4/44.4 kB 337.6 kB/s eta 0:00:00

Jun 15 09:59:09 PM



Downloading packaging-25.0-py3-none-any.whl (66 kB)

Jun 15 09:59:09 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 66.5/66.5 kB 731.2 kB/s eta 0:00:00

Jun 15 09:59:09 PM



Downloading typing_extensions-4.14.0-py3-none-any.whl (43 kB)

Jun 15 09:59:09 PM



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 43.8/43.8 kB 248.2 kB/s eta 0:00:00

Jun 15 09:59:09 PM



Installing collected packages: python-decouple, whitenoise, typing_extensions, sqlparse, psycopg2-binary, packaging, numpy, asgiref, gunicorn, Django, dj-database-url

Jun 15 09:59:14 PM



Successfully installed Django-5.2.3 asgiref-3.8.1 dj-database-url-3.0.0 gunicorn-23.0.0 numpy-2.3.0 packaging-25.0 psycopg2-binary-2.9.10 python-decouple-3.8 sqlparse-0.5.3 typing_extensions-4.14.0 whitenoise-6.9.0

Jun 15 09:59:14 PM



Jun 15 09:59:14 PM



[notice] A new release of pip is available: 24.0 -> 25.1.1

Jun 15 09:59:14 PM



[notice] To update, run: pip install --upgrade pip

Jun 15 09:59:14 PM



Jun 15 09:59:14 PM



127 static files copied to '/opt/render/project/src/staticfiles'.

Jun 15 09:59:14 PM



Traceback (most recent call last):

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/checks/urls.py", line 136, in check_custom_error_handlers

Jun 15 09:59:14 PM



handler = resolver.resolve_error_handler(status_code)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/urls/resolvers.py", line 732, in resolve_error_handler

Jun 15 09:59:14 PM



callback = getattr(self.urlconf_module, "handler%s" % view_type, None)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/utils/functional.py", line 47, in __get__

Jun 15 09:59:14 PM



res = instance.__dict__[self.name] = self.func(instance)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/urls/resolvers.py", line 711, in urlconf_module

Jun 15 09:59:14 PM



return import_module(self.urlconf_name)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/python/Python-3.12.4/lib/python3.12/importlib/__init__.py", line 90, in import_module

Jun 15 09:59:14 PM



return _bootstrap._gcd_import(name[level:], package, level)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1310, in _find_and_load_unlocked

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1324, in _find_and_load_unlocked

Jun 15 09:59:14 PM



ModuleNotFoundError: No module named 'myproject'

Jun 15 09:59:14 PM



Jun 15 09:59:14 PM



During handling of the above exception, another exception occurred:

Jun 15 09:59:14 PM



Jun 15 09:59:14 PM



Traceback (most recent call last):

Jun 15 09:59:14 PM



File "/opt/render/project/src/manage.py", line 22, in <module>

Jun 15 09:59:14 PM



main()

Jun 15 09:59:14 PM



File "/opt/render/project/src/manage.py", line 18, in main

Jun 15 09:59:14 PM



execute_from_command_line(sys.argv)

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line

Jun 15 09:59:14 PM



utility.execute()

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/management/__init__.py", line 436, in execute

Jun 15 09:59:14 PM



self.fetch_command(subcommand).run_from_argv(self.argv)

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/management/base.py", line 416, in run_from_argv

Jun 15 09:59:14 PM



self.execute(*args, **cmd_options)

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/management/base.py", line 457, in execute

Jun 15 09:59:14 PM



self.check(**check_kwargs)

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/management/base.py", line 492, in check

Jun 15 09:59:14 PM



all_issues = checks.run_checks(

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/checks/registry.py", line 89, in run_checks

Jun 15 09:59:14 PM



new_errors = check(app_configs=app_configs, databases=databases)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/core/checks/urls.py", line 138, in check_custom_error_handlers

Jun 15 09:59:14 PM



path = getattr(resolver.urlconf_module, "handler%s" % status_code)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/utils/functional.py", line 47, in __get__

Jun 15 09:59:14 PM



res = instance.__dict__[self.name] = self.func(instance)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/django/urls/resolvers.py", line 711, in urlconf_module

Jun 15 09:59:14 PM



return import_module(self.urlconf_name)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "/opt/render/project/python/Python-3.12.4/lib/python3.12/importlib/__init__.py", line 90, in import_module

Jun 15 09:59:14 PM



return _bootstrap._gcd_import(name[level:], package, level)

Jun 15 09:59:14 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1310, in _find_and_load_unlocked

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 09:59:14 PM



File "<frozen importlib._bootstrap>", line 1324, in _find_and_load_unlocked

Jun 15 09:59:14 PM



ModuleNotFoundError: No module named 'myproject'

Jun 15 09:59:15 PM



==> Build failed ğŸ˜

Jun 15 09:59:15 PM



==> Common ways to troubleshoot your deploy: https://render.com/docs/troubleshooting-deploys




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’æ‹è¦‹ã—ã¾ã—ãŸã€‚requirements.txtã®å•é¡ŒãŒè§£æ±ºã—ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ”ãƒ¼ãŒæ­£å¸¸ã«å®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ç´ æ™´ã‚‰ã—ã„é€²æ—ã§ã™ã€‚

[notice] A new release of pip is available: 24.0 -> 25.1.1 
Successfully installed Django-5.2.3 asgiref-3.8.1 dj-database-url-3.0.0 gunicorn-23.0.0 numpy-2.3.0 packaging-25.0 psycopg2-binary-2.9.10 python-decouple-3.8 sqlparse-0.5.3 typing_extensions-4.14.0 whitenoise-6.9.0 
127 static files copied to '/opt/render/project/src/staticfiles'. 

ãƒ“ãƒ«ãƒ‰ã®æœ€çµ‚æ®µéšã§æ–°ãŸãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ãŒã€åŸå› ã¯éå¸¸ã«æ˜ç¢ºã§ã€è§£æ±ºã‚‚ç°¡å˜ã§ã™ã€‚

æ–°ãŸãªã‚¨ãƒ©ãƒ¼ã®åŸå› 
ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

ModuleNotFoundError: No module named 'myproject' 

ã“ã‚Œã¯ã€ã€Œmyprojectã¨ã„ã†åå‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šãŒè¨˜è¿°ã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¨ã€Renderã®å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãŒä¸€è‡´ã—ã¦ã„ãªã„ãŸã‚ã«ç™ºç”Ÿã—ã¾ã™ã€‚

ä»¥å‰ãŠè¦‹ã›ã„ãŸã ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚„settings.pyã®å†…å®¹ã‹ã‚‰åˆ¤æ–­ã™ã‚‹ã¨ã€ãŠå®¢æ§˜ã®Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåï¼ˆsettings.pyã‚„urls.pyãŒå…¥ã£ã¦ã„ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ï¼‰ã¯ã€myprojectã§ã¯ãªãprojectã§ã‚ã‚‹å¯èƒ½æ€§ãŒéå¸¸ã«é«˜ã„ã§ã™ã€‚

è§£æ±ºç­–
ã“ã®åå‰ã®ä¸ä¸€è‡´ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã€Renderã®ã€ŒStart Commandï¼ˆé–‹å§‹ã‚³ãƒãƒ³ãƒ‰ï¼‰ã€ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

Renderã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã
å¯¾è±¡ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆmy-calculator-appãªã©ï¼‰ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¾ã™ã€‚

[Settings]ã‚¿ãƒ–ã«ç§»å‹•
å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰[Settings]ã‚’é¸æŠã—ã¾ã™ã€‚

Start Commandã‚’ä¿®æ­£
ãƒšãƒ¼ã‚¸ã‚’ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã€ã€ŒStart Commandã€ã¨ã„ã†é …ç›®ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚
ç¾åœ¨ã®è¨­å®šã¯ã€ãŠãã‚‰ãä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
gunicorn myproject.wsgi:application

ã“ã‚Œã‚’ã€ä»¥ä¸‹ã®ã‚ˆã†ã«myprojectã®éƒ¨åˆ†ã‚’projectã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

gunicorn project.wsgi:application

è¨­å®šã‚’ä¿å­˜
ãƒšãƒ¼ã‚¸æœ€ä¸‹éƒ¨ã«ã‚ã‚‹**[Save Changes]**ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å¤‰æ›´ã‚’ä¿å­˜ã—ã¾ã™ã€‚

æ‰‹å‹•ã§ãƒ‡ãƒ—ãƒ­ã‚¤
è¨­å®šã‚’ä¿å­˜ã—ãŸå¾Œã€ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®**[Manual Deploy]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰[Deploy latest commit]**ã‚’é¸æŠã—ã¦ã€æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¦ãã ã•ã„ã€‚

ä»¥ä¸Šã®ä¿®æ­£ã«ã‚ˆã‚Šã€Renderã¯æ­£ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆprojectï¼‰ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã‚ˆã†ã¨ã™ã‚‹ãŸã‚ã€ModuleNotFoundErrorã¯è§£æ¶ˆã•ã‚Œã€ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹ã¯ãšã§ã™ã€‚


ã‚½ãƒ¼ã‚¹





"""

Django settings for myproject project.



Generated by 'django-admin startproject' using Django 5.0.6.



For more information on this file, see

https://docs.djangoproject.com/en/5.0/topics/settings/



For the full list of settings and their values, see

https://docs.djangoproject.com/en/5.0/ref/settings/

"""



import os

from pathlib import Path



# Build paths inside the project like this: BASE_DIR / 'subdir'.

BASE_DIR = Path(__file__).resolve().parent.parent





# Quick-start development settings - unsuitable for production

# See https://docs.djangoproject.com/en/5.0/howto/deployment/checklist/



# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

# SECRET_KEYã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚

# Renderã®ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ãŸå€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚

SECRET_KEY = os.environ.get(

Â  Â  'SECRET_KEY',

Â  Â  "django-insecure-fg96%@#vh=pdzeu=zde^4gx_&622%%^_wr0u=74l_f&_65yfa2"

)



# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

# DEBUGãƒ¢ãƒ¼ãƒ‰ã¯ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã—ã¾ã™ã€‚Renderã§ã¯è‡ªå‹•ã§Falseã«ãªã‚Šã¾ã™ã€‚

DEBUG = os.environ.get('DEBUG', 'False').lower() == 'true'



# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

# è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆåã€‚Renderã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è‡ªå‹•ã§è¿½åŠ ã—ã¾ã™ã€‚

ALLOWED_HOSTS = []

RENDER_EXTERNAL_HOSTNAME = os.environ.get('RENDER_EXTERNAL_HOSTNAME')

if RENDER_EXTERNAL_HOSTNAME:

Â  Â  ALLOWED_HOSTS.append(RENDER_EXTERNAL_HOSTNAME)





# Application definition



INSTALLED_APPS = [

Â  Â  'django.contrib.admin',

Â  Â  'django.contrib.auth',

Â  Â  'django.contrib.contenttypes',

Â  Â  'django.contrib.sessions',

Â  Â  'django.contrib.messages',

Â  Â  'django.contrib.staticfiles',

Â  Â  'calculator', # ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

]



MIDDLEWARE = [

Â  Â  'django.middleware.security.SecurityMiddleware',

Â  Â  # â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

Â  Â  # WhitenoiseãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’SecurityMiddlewareã®ç›´å¾Œã«è¿½åŠ 

Â  Â  'whitenoise.middleware.WhiteNoiseMiddleware',

Â  Â  'django.contrib.sessions.middleware.SessionMiddleware',

Â  Â  'django.middleware.common.CommonMiddleware',

Â  Â  'django.middleware.csrf.CsrfViewMiddleware',

Â  Â  'django.contrib.auth.middleware.AuthenticationMiddleware',

Â  Â  'django.contrib.messages.middleware.MessageMiddleware',

Â  Â  'django.middleware.clickjacking.XFrameOptionsMiddleware',

]



ROOT_URLCONF = 'myproject.urls'



TEMPLATES = [

Â  Â  {

Â  Â  Â  Â  'BACKEND': 'django.template.backends.django.DjangoTemplates',

Â  Â  Â  Â  'DIRS': [],

Â  Â  Â  Â  'APP_DIRS': True,

Â  Â  Â  Â  'OPTIONS': {

Â  Â  Â  Â  Â  Â  'context_processors': [

Â  Â  Â  Â  Â  Â  Â  Â  'django.template.context_processors.debug',

Â  Â  Â  Â  Â  Â  Â  Â  'django.template.context_processors.request',

Â  Â  Â  Â  Â  Â  Â  Â  'django.contrib.auth.context_processors.auth',

Â  Â  Â  Â  Â  Â  Â  Â  'django.contrib.messages.context_processors.messages',

Â  Â  Â  Â  Â  Â  ],

Â  Â  Â  Â  },

Â  Â  },

]



WSGI_APPLICATION = 'myproject.wsgi.application'





# Database

# https://docs.djangoproject.com/en/5.0/ref/settings/#databases



DATABASES = {

Â  Â  'default': {

Â  Â  Â  Â  'ENGINE': 'django.db.backends.sqlite3',

Â  Â  Â  Â  'NAME': BASE_DIR / 'db.sqlite3',

Â  Â  }

}





# Password validation

# https://docs.djangoproject.com/en/5.0/ref/settings/#auth-password-validators



AUTH_PASSWORD_VALIDATORS = [

Â  Â  {

Â  Â  Â  Â  'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',

Â  Â  },

Â  Â  {

Â  Â  Â  Â  'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',

Â  Â  },

Â  Â  {

Â  Â  Â  Â  'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',

Â  Â  },

Â  Â  {

Â  Â  Â  Â  'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',

Â  Â  },

]





# Internationalization

# https://docs.djangoproject.com/en/5.0/topics/i18n/



LANGUAGE_CODE = 'ja'



TIME_ZONE = 'Asia/Tokyo'



USE_I18N = True



USE_TZ = True





# Static files (CSS, JavaScript, Images)

# https://docs.djangoproject.com/en/5.0/howto/static-files/



STATIC_URL = 'static/'



# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

# collectstaticã‚³ãƒãƒ³ãƒ‰ã§é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹å ´æ‰€

STATIC_ROOT = BASE_DIR / 'staticfiles'



# â–¼â–¼â–¼ æœ¬ç•ªç’°å¢ƒç”¨ã®è¨­å®š â–¼â–¼â–¼

# WhitenoiseãŒé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŠ¹ç‡çš„ã«é…ä¿¡ã™ã‚‹ãŸã‚ã®è¨­å®š

STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'





# Default primary key field type

# https://docs.djangoproject.com/en/5.0/ref/settings/#default-auto-field



DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

æ”¹å–„ã—ã¦ã™ã¹ã¦æ›¸ã„ã¦




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ç¾åœ¨ã®settings.pyã¯æœ¬ç•ªç’°å¢ƒç”¨ã«éå¸¸ã«ã‚ˆãè¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€ã•ã‚‰ã«å …ç‰¢ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã¨æœ¬ç•ªç’°å¢ƒã®åˆ‡ã‚Šæ›¿ãˆã‚’ã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºã«ã™ã‚‹ãŸã‚ã®æ”¹å–„ã‚’åŠ ãˆãŸæœ€çµ‚ç‰ˆã‚’ä»¥ä¸‹ã«æç¤ºã—ã¾ã™ã€‚

ä¸»ãªæ”¹å–„ç‚¹
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šã®å¼·åŒ–:

æœ¬ç•ªç’°å¢ƒã§ã¯RenderãŒæä¾›ã™ã‚‹PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã¯æ‰‹è»½ãªSQLiteã‚’è‡ªå‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆã¦ä½¿ã†ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€requirements.txtã«å«ã¾ã‚Œã¦ã„ã‚‹dj-database-urlã¨psycopg2-binaryã‚’æœ€å¤§é™ã«æ´»ç”¨ã§ãã¾ã™ã€‚
è¨±å¯ãƒ›ã‚¹ãƒˆ (ALLOWED_HOSTS) ã®æŸ”è»Ÿæ€§å‘ä¸Š:

DEBUGãŒTrueã®ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ã«ã¯ã€è‡ªå‹•ã§127.0.0.1ã‚’è¨±å¯ã—ã€Renderã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸéš›ã«ã¯Renderã®ãƒ›ã‚¹ãƒˆåã‚’è¨±å¯ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚
ä»¥ä¸‹ãŒæ”¹å–„ã•ã‚ŒãŸsettings.pyã®å…¨ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

Python

"""
Django settings for myproject project.

Generated by 'django-admin startproject' using Django 5.0.6.
Improved for production and local development flexibility.
"""

import os
import dj_database_url
from pathlib import Path

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent


# ==============================================================================
# CORE SETTINGS
# ==============================================================================

# SECRET_KEYã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚
# Renderã®ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ãŸå€¤ãŒä½¿ã‚ã‚Œã¾ã™ã€‚
SECRET_KEY = os.environ.get(
    'SECRET_KEY',
    "django-insecure-fallback-key-for-local-development"
)

# DEBUGãƒ¢ãƒ¼ãƒ‰ã¯ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã—ã¾ã™ã€‚Renderã§ã¯è‡ªå‹•ã§Falseã«ãªã‚Šã¾ã™ã€‚
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ 'True' ã‚’è¨­å®šã—ãªã„é™ã‚Šã€æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼ˆFalseï¼‰ã§å‹•ä½œã—ã¾ã™ã€‚
DEBUG = os.environ.get('DEBUG', 'False').lower() == 'true'

# è¨±å¯ã™ã‚‹ãƒ›ã‚¹ãƒˆåã€‚
# æœ¬ç•ªç’°å¢ƒã§ã¯Renderã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ã€é–‹ç™ºç’°å¢ƒã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã‚’è‡ªå‹•ã§è¿½åŠ ã—ã¾ã™ã€‚
ALLOWED_HOSTS = []

RENDER_EXTERNAL_HOSTNAME = os.environ.get('RENDER_EXTERNAL_HOSTNAME')
if RENDER_EXTERNAL_HOSTNAME:
    ALLOWED_HOSTS.append(RENDER_EXTERNAL_HOSTNAME)

if DEBUG:
    ALLOWED_HOSTS.extend(['127.0.0.1', 'localhost'])


# ==============================================================================
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
# ==============================================================================

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'calculator', # ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    # WhitenoiseãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’SecurityMiddlewareã®ç›´å¾Œã«è¿½åŠ 
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'myproject.urls'
WSGI_APPLICATION = 'myproject.wsgi.application'


# ==============================================================================
# ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
# ==============================================================================

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]


# ==============================================================================
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
# ==============================================================================

# Renderã§DATABASE_URLç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°PostgreSQLã‚’ã€
# ãã†ã§ãªã‘ã‚Œã°ãƒ­ãƒ¼ã‚«ãƒ«ã®SQLiteã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
DATABASES = {
    'default': dj_database_url.config(
        conn_max_age=600,
        ssl_require=not DEBUG,  # æœ¬ç•ªç’°å¢ƒ(DEBUG=False)ã§ã®ã¿SSLæ¥ç¶šã‚’å¿…é ˆã«ã™ã‚‹
        default=f'sqlite:///{BASE_DIR / "db.sqlite3"}'
    )
}


# ==============================================================================
# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼
# ==============================================================================

AUTH_PASSWORD_VALIDATORS = [
    {'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'},
    {'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator'},
    {'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator'},
    {'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator'},
]


# ==============================================================================
# å›½éš›åŒ–
# ==============================================================================

LANGUAGE_CODE = 'ja'
TIME_ZONE = 'Asia/Tokyo'
USE_I18N = True
USE_TZ = True


# ==============================================================================
# é™çš„ãƒ•ã‚¡ã‚¤ãƒ« (CSS, JavaScript, Images)
# ==============================================================================

STATIC_URL = 'static/'

# collectstaticã‚³ãƒãƒ³ãƒ‰ã§é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹å ´æ‰€
STATIC_ROOT = BASE_DIR / 'staticfiles'

# WhitenoiseãŒé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŠ¹ç‡çš„ã«é…ä¿¡ã™ã‚‹ãŸã‚ã®è¨­å®š
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'


# ==============================================================================
# ãã®ä»–
# ==============================================================================

# Default primary key field type
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'





project/ <-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€

â”œâ”€â”€ manage.py <-- Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

|

â”œâ”€â”€ project/ <-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šç”¨ã®ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¨åŒã˜ï¼‰

â”‚ â”œâ”€â”€ __init__.py

â”‚ â”œâ”€â”€ asgi.py

â”‚ â”œâ”€â”€ settings.py <-- INSTALLED_APPSãªã©ã‚’è¨­å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«

â”‚ â”œâ”€â”€ urls.py <-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®URLã‚’è¨­å®šã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

â”‚ â””â”€â”€ wsgi.py

â”‚

â””â”€â”€ calculator/ <-- 'startapp calculator'ã§ä½œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚©ãƒ«ãƒ€

â”œâ”€â”€ __init__.py

â”œâ”€â”€ admin.py

â”œâ”€â”€ apps.py

â”œâ”€â”€ migrations/

â”‚ â””â”€â”€ __init__.py

â”œâ”€â”€ models.py

â”œâ”€â”€ tests.py

â”œâ”€â”€ urls.py <-- ã€æ–°è¦ä½œæˆã€‘calculatorã‚¢ãƒ—ãƒªå°‚ç”¨ã®URLã‚’è¨­å®šã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

â”œâ”€â”€ views.py <-- indexã‚„multiply_viewã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«

â”‚

â””â”€â”€ templates/ <-- ã€æ–°è¦ä½œæˆã€‘HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ããŸã‚ã®ãƒ•ã‚©ãƒ«ãƒ€

â””â”€â”€ calculator/ <-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã¨åŒã˜åå‰ã®ãƒ•ã‚©ãƒ«ãƒ€

â”œâ”€â”€ index.html <-- ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®HTML

â””â”€â”€ partials

ã€€ã€€ã€€ã€€ã€€ã€€ã€€â””â”€â”€Â result_partial.html <-- çµæœè¡¨ç¤ºç”¨

ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã†ãªã£ã¦ã„ã¾ã—ãŸã“ã‚Œã‚’è¸ã¾ãˆã¦ä½•ã‚’æ”¹å–„ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
ã”æç¤ºã„ãŸã ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã€æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚ã“ã‚Œã¯Djangoã®æ¨™æº–çš„ã§éå¸¸ã«è‰¯ã„æ§‹æˆã§ã™ã€‚ãã®ä¸Šã§ã€ä»Šå¾Œã®é–‹ç™ºã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã‚ˆã‚Šç°¡å˜ã«ã™ã‚‹ãŸã‚ã®æ”¹å–„æ¡ˆã‚’ã„ãã¤ã‹ææ¡ˆã—ã¾ã™ã€‚

æ”¹å–„æ¡ˆã®æ¦‚è¦
ç¾åœ¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã¨æ€ã„ã¾ã™ãŒã€ä»¥ä¸‹ã®ç‚¹ã‚’æ”¹å–„ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§æ‹¡å¼µæ€§ã®é«˜ã„æ§‹é€ ã«ãªã‚Šã¾ã™ã€‚

é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSS, JavaScriptï¼‰ã®åˆ†é›¢
ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®šç®¡ç†ã®å¾¹åº•
ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆ
ï¼ˆå°†æ¥çš„ãªæ‹¡å¼µï¼‰å…±é€šãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ
1. é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCSS, JavaScriptï¼‰ã®åˆ†é›¢ï¼ˆæ¨å¥¨åº¦ï¼šé«˜ï¼‰
ç¾åœ¨ã€index.htmlå†…ã«CSSï¼ˆ<style>ã‚¿ã‚°ï¼‰ã¨JavaScriptï¼ˆ<script>ã‚¿ã‚°ï¼‰ãŒç›´æ¥æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®è¦‹é€šã—ãŒè‰¯ããªã‚Šã€ç®¡ç†ãŒã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

æ”¹å–„æ‰‹é †ï¼š
a. staticãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã™ã‚‹
calculatorã‚¢ãƒ—ãƒªå†…ã«staticãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚

calculator/
â”œâ”€â”€ static/  <-- ã€æ–°è¦ä½œæˆã€‘
â”‚   â””â”€â”€ calculator/
â”‚       â”œâ”€â”€ css/
â”‚       â”‚   â””â”€â”€ style.css  <-- CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«ç½®ã
â”‚       â””â”€â”€ js/
â”‚           â””â”€â”€ script.js  <-- JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«ç½®ã
â””â”€â”€ templates/
    â””â”€â”€ ...
b. CSSã¨JavaScriptã‚’å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»å‹•ã™ã‚‹

index.htmlã®<style>ã‚¿ã‚°ã®ä¸­èº«ã‚’ã€static/calculator/css/style.cssã«ç§»å‹•ã—ã¾ã™ã€‚
index.htmlã®<script>ã‚¿ã‚°ã®ä¸­èº«ï¼ˆHTMXãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿ä»¥å¤–ï¼‰ã‚’ã€static/calculator/js/script.jsã«ç§»å‹•ã—ã¾ã™ã€‚
c. index.htmlã‚’ä¿®æ­£ã™ã‚‹
{% load static %} ã‚¿ã‚°ã‚’ä½¿ã£ã¦ã€å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

HTML

{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    ...
    <title>1135è¨ˆç®—æ©Ÿ</title>
    
    <link rel="stylesheet" href="{% static 'calculator/css/style.css' %}">
    
    ...
</head>
<body>
    ...
    ...

    <script src="https://unpkg.com/htmx.org@1.9.10" ...></script>

    <script src="{% static 'calculator/js/script.js' %}"></script>
</body>
</html>
2. ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®šç®¡ç†ã®å¾¹åº•ï¼ˆæ¨å¥¨åº¦ï¼šä¸­ï¼‰
settings.pyã§SECRET_KEYãªã©ã‚’ç’°å¢ƒå¤‰æ•°ã‹ã‚‰èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ã«ã“ã‚Œã‚‰ã®å¤‰æ•°ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã«.envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã†ã¨éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚requirements.txtã«å«ã¾ã‚Œã‚‹python-decoupleãŒã“ã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

æ”¹å–„æ‰‹é †ï¼š
a. .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆï¼ˆmanage.pyã¨åŒã˜éšå±¤ï¼‰ã«.envã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

# .env ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¾‹
SECRET_KEY=your-local-secret-key-here-12345
DEBUG=True
DATABASE_URL=sqlite:///db.sqlite3
é‡è¦ï¼š .envãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ç§˜å¯†æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ãŸã‚ã€å¿…ãš.gitignoreãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã—ã¦ã€GitHubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

b. settings.pyã‚’ä¿®æ­£ã™ã‚‹
python-decoupleã®configé–¢æ•°ã‚’ä½¿ã£ã¦ã€.envãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¾ã™ã€‚

Python

# project/settings.py ã®å†’é ­éƒ¨åˆ†
import os
from pathlib import Path
from decouple import config # ì¶”ê°€

...

# SECRET_KEYã‚’ .env ã‹ã‚‰èª­ã¿è¾¼ã‚€ï¼ˆãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ï¼‰
SECRET_KEY = config('SECRET_KEY')

# DEBUGãƒ¢ãƒ¼ãƒ‰ã‚’ .env ã‹ã‚‰èª­ã¿è¾¼ã‚€ï¼ˆãªã‘ã‚Œã°Falseï¼‰
DEBUG = config('DEBUG', default=False, cast=bool)

...

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šã‚‚ .env ã‹ã‚‰èª­ã¿è¾¼ã‚ã‚‹
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
# DATABASE_URLãŒ .env ã«ã‚ã‚Œã°ã€ãã¡ã‚‰ã‚’å„ªå…ˆ
DATABASE_URL = config('DATABASE_URL', default=None)
if DATABASE_URL:
    DATABASES['default'] = dj_database_url.parse(DATABASE_URL)
ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒï¼ˆRenderï¼‰ã§settings.pyã‚’ä¸€åˆ‡å¤‰æ›´ã™ã‚‹ã“ã¨ãªãã€.envãƒ•ã‚¡ã‚¤ãƒ«ã¨Renderã®ç’°å¢ƒå¤‰æ•°è¨­å®šã ã‘ã§ç’°å¢ƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚

3. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®ä½œæˆï¼ˆæ¨å¥¨åº¦ï¼šä¸­ï¼‰
calculator/tests.pyã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ã§ã€æ©Ÿèƒ½ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã€å°†æ¥ã®å¤‰æ›´ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰ã‚’å®‰å¿ƒã—ã¦è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

æ”¹å–„æ‰‹é †ï¼š
calculator/tests.pyã«ã€è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãŒæ­£ã—ã„ã‹ã‚’ç¢ºèªã™ã‚‹ç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚

Python

# calculator/tests.py
from django.test import TestCase, Client
from django.urls import reverse

class CalculatorTests(TestCase):

    def test_calculate_view_correctly(self):
        """
        calculate_viewãŒæ­£ã—ã„è¨ˆç®—çµæœã‚’è¿”ã™ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹
        """
        client = Client()
        # 'calculate'ã¨ã„ã†åå‰ã®URLã«å¯¾ã—ã¦POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
        response = client.post(reverse('calculate'), {'number_input': '10'})

        # ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãŒ200 (OK) ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
        self.assertEqual(response.status_code, 200)

        # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®HTMLã«æ­£ã—ã„è¨ˆç®—çµæœ '11,350' ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
        self.assertContains(response, "è¨ˆç®—çµæœï¼š11,350")

    def test_calculate_view_with_no_input(self):
        """
        å…¥åŠ›ãŒãªã„å ´åˆã« '0' ã‚’è¿”ã™ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹
        """
        client = Client()
        response = client.post(reverse('calculate'), {'number_input': ''})
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, "è¨ˆç®—çµæœï¼š0")

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ python manage.py test ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

4. ï¼ˆå°†æ¥çš„ãªæ‹¡å¼µï¼‰å…±é€šãƒ™ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆ
ä»Šå¾Œã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã‚’è¿½åŠ ã™ã‚‹å ´åˆã€å…¨ãƒšãƒ¼ã‚¸å…±é€šã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚„ãƒ•ãƒƒã‚¿ãƒ¼ãªã©ã‚’base.htmlã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚

æ”¹å–„æ‰‹é †ï¼š
a. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«templatesãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
manage.pyã¨åŒã˜éšå±¤ã«templatesãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã€ãã®ä¸­ã«base.htmlã‚’ç½®ãã¾ã™ã€‚

b. settings.pyã®TEMPLATESè¨­å®šã‚’æ›´æ–°
'DIRS'ã«ã€æ–°ã—ãä½œæˆã—ãŸtemplatesãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚
'DIRS': [BASE_DIR / 'templates'],

c. base.htmlã¨index.htmlã‚’ä½œæˆãƒ»ä¿®æ­£
index.htmlã§base.htmlã‚’ç¶™æ‰¿ (extends) ã—ã€ç‰¹å®šã®ãƒ–ãƒ­ãƒƒã‚¯ (block) ã®ä¸­èº«ã ã‘ã‚’è¨˜è¿°ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®æ”¹å–„ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å“è³ªã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’å¤§ããå‘ä¸Šã•ã›ã¾ã™ã€‚ç‰¹ã«ã€Œé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†é›¢ã€ã¯ã™ãã«ã§ã‚‚å–ã‚Šçµ„ã‚€ä¾¡å€¤ã®ã‚ã‚‹æ”¹å–„ã§ã™ã€‚






Start Commandã‚’ä¿®æ­£

ãƒšãƒ¼ã‚¸ã‚’ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã€ã€ŒStart Commandã€ã¨ã„ã†é …ç›®ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚

ç¾åœ¨ã®è¨­å®šã¯ã€ãŠãã‚‰ãä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚gunicorn myproject.wsgi:application

ã“ã‚Œã‚’ã€ä»¥ä¸‹ã®ã‚ˆã†ã«myprojectã®éƒ¨åˆ†ã‚’projectã«ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚

gunicorn project.wsgi:application

ã“ã“ã‚’è©³ã—ã




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
æ‰¿çŸ¥ã„ãŸã—ã¾ã—ãŸã€‚Renderã®ã€ŒStart Commandã€ã‚’gunicorn myproject.wsgi:applicationã‹ã‚‰gunicorn project.wsgi:applicationã«ä¿®æ­£ã™ã‚‹ç†ç”±ã«ã¤ã„ã¦ã€å„éƒ¨åˆ†ãŒä½•ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã®ã‹ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

Start Commandã¨ã¯ï¼Ÿ
ã¾ãšã€ã€ŒStart Commandã€ã¯ã€RenderãŒã‚ãªãŸã®ã‚³ãƒ¼ãƒ‰ã®æº–å‚™ï¼ˆãƒ“ãƒ«ãƒ‰ï¼‰ã‚’çµ‚ãˆãŸå¾Œã«ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã«å®Ÿè¡Œã™ã‚‹ã€ãŸã£ãŸä¸€ã¤ã®å‘½ä»¤ã§ã™ã€‚ã“ã®å‘½ä»¤ãŒæˆåŠŸã—ã¦åˆã‚ã¦ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

ã‚³ãƒãƒ³ãƒ‰ã®åˆ†è§£ï¼š gunicorn project.wsgi:application
ã“ã®ä¸€è¡Œã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€å¤§ãã2ã¤ã®éƒ¨åˆ†ã«åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

gunicornï¼šã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼
project.wsgi:applicationï¼šã‚ãªãŸã®Djangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å ´æ‰€
1. gunicorn ã¨ã¯ï¼Ÿ (æœ¬ç•ªç”¨ã®ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼)
gunicornï¼ˆGreen Unicornï¼‰ã¯ã€Pythonã§æ›¸ã‹ã‚ŒãŸæœ¬ç•ªç’°å¢ƒç”¨ã®WSGI HTTPã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

é–‹ç™ºç”¨ã‚µãƒ¼ãƒãƒ¼ã¨ã®é•ã„: ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã™ã‚‹éš›ã«ä½¿ã† python manage.py runserver ã¯ã€ã‚ãã¾ã§é–‹ç™ºå°‚ç”¨ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚ä¸€åº¦ã«ä¸€ã¤ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã‹å‡¦ç†ã§ããšã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚‚è€ƒæ…®ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
æœ¬ç•ªç”¨ã‚µãƒ¼ãƒãƒ¼ã®å½¹å‰²: gunicornã¯ã€ä¸–ç•Œä¸­ã‹ã‚‰æ¥ã‚‹å¤šæ•°ã®åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã‚’åŠ¹ç‡çš„ã‹ã¤å®‰å®šã—ã¦ã•ã°ãã€ãã‚Œã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚ãªãŸã®Djangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ¸¡ã™ã¨ã„ã†é‡è¦ãªå½¹å‰²ã‚’æ‹…ã„ã¾ã™ã€‚ã„ã‚ã°ã€äº¤é€šæ•´ç†ã‚’ã—ã¦ãã‚Œã‚‹å±ˆå¼·ãªè­¦å‚™å“¡ã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ã€‚
2. project.wsgi:application ã¨ã¯ï¼Ÿ (Djangoã‚¢ãƒ—ãƒªã®ç„é–¢)
ã“ã®éƒ¨åˆ†ã¯ã€gunicornï¼ˆè­¦å‚™å“¡ï¼‰ã«å¯¾ã—ã¦ã€ã€Œäº¤é€šæ•´ç†ã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã©ã“ã«æ¸¡ã›ã°ã„ã„ã‹ã€ã‚’ä¼ãˆã‚‹ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½æ‰€ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ã“ã‚Œã¯ã•ã‚‰ã«3ã¤ã®éƒ¨åˆ†ã«åˆ†è§£ã§ãã¾ã™ã€‚

project
ã“ã‚Œã¯ã€ã‚ãªãŸã®Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼æ§˜ãŒç¤ºã—ã¦ãã ã•ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã§ã¯ã€settings.pyã‚„urls.pyã€ãã—ã¦wsgi.pyãŒå…¥ã£ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®åå‰ãŒprojectã§ã—ãŸã€‚gunicornã¯ã“ã®åå‰ã‚’é ¼ã‚Šã«ã€ç›®çš„ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¢ã—ã«è¡Œãã¾ã™ã€‚

project/              
 â”œâ”€â”€ manage.py            
 â”œâ”€â”€ project/  <-- **ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã‚’æŒ‡ã—ã¦ã„ã¾ã™**
 â”‚   â”œâ”€â”€ settings.py      
 â”‚   â”œâ”€â”€ urls.py          
 â”‚   â””â”€â”€ wsgi.py  <-- ã“ã®ä¸­ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
 â””â”€â”€ calculator/ 
.wsgi
ã“ã‚Œã¯ã€projectãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ã‚ã‚‹wsgi.pyã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã®ã“ã¨ã§ã™ã€‚
WSGIï¼ˆWeb Server Gateway Interfaceï¼‰ã¯ã€gunicornã®ã‚ˆã†ãªã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã¨ã€Djangoã®ã‚ˆã†ãªPythonã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯¾è©±ã™ã‚‹ãŸã‚ã®æ¨™æº–çš„ãªã€Œæ¥ç¶šè¦æ ¼ã€ã§ã™ã€‚wsgi.pyã¯ã€ãã®æ¥ç¶šã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ç„é–¢å£ã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

:application
ã“ã‚Œã¯ã€wsgi.pyãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹applicationã¨ã„ã†å¤‰æ•°ã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚
wsgi.pyã®ä¸­èº«ã‚’è¦‹ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¡ŒãŒã‚ã‚Šã¾ã™ã€‚

Python

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()
ã“ã®applicationã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã“ããŒã€gunicornãŒæœ€çµ‚çš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸¡ã™ç›¸æ‰‹ã€ã¤ã¾ã‚ŠDjangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“ã®å—ä»˜çª“å£ã§ã™ã€‚

ã¾ã¨ã‚ï¼šãªãœä¿®æ­£ãŒå¿…è¦ã ã£ãŸã®ã‹ï¼Ÿ
ä»¥ä¸Šã®ã“ã¨ã‚’è¸ã¾ãˆã¦ã€ã‚³ãƒãƒ³ãƒ‰å…¨ä½“ã‚’æ—¥æœ¬èªã«è¨³ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã€Œgunicornã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ¥ãŸã‚‰ã€projectã¨ã„ã†åå‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹wsgi.pyãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã®ã€applicationã¨ã„ã†å—ä»˜çª“å£ã«æ¸¡ã—ã¦ãã ã•ã„ã€

ä»¥å‰ã®ã‚³ãƒãƒ³ãƒ‰gunicorn myproject.wsgi:applicationãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã®ã¯ã€ã€Œmyprojectã¨ã„ã†åå‰ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ¢ã›ã€ ã¨ã„ã†å‘½ä»¤ã«ãªã£ã¦ã„ãŸã‹ã‚‰ã§ã™ã€‚ã—ã‹ã—ã€å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¯projectã ã£ãŸãŸã‚ã€gunicornã¯ç„é–¢å£ã§ã‚ã‚‹wsgi.pyã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãšã€ã€Œãã‚“ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆModuleNotFoundErrorï¼‰ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦åœæ­¢ã—ã¦ã—ã¾ã£ãŸã®ã§ã™ã€‚

ä»Šå›ã®ä¿®æ­£ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã‚ãªãŸã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ­£ã—ã„ä½æ‰€ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåï¼‰ã‚’æ•™ãˆç›´ã™ã€éå¸¸ã«é‡è¦ãªæ‰‹é †ã ã£ãŸã‚ã‘ã§ã™ã€‚






çµè«–ã©ã†ã™ã‚Œã°ã‚ˆã„k



æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
çµè«–ã¨ã—ã¦ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ç¢ºå®Ÿã«å…¬é–‹ã—ã€ã•ã‚‰ã«è‰¯ãã—ã¦ã„ããŸã‚ã«å®Ÿè¡Œã™ã¹ãã“ã¨ã¯ã€ä»¥ä¸‹ã®2ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã¾ã¨ã‚ã‚‰ã‚Œã¾ã™ã€‚

ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç¢ºå®Ÿã«æˆåŠŸã•ã›ã‚‹ãŸã‚ã®æœ€çµ‚ç¢ºèª
ã“ã‚Œã¾ã§ã®ã‚„ã‚Šå–ã‚Šã‚’è¸ã¾ãˆã€Renderã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æˆåŠŸã•ã›ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®3ç‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹æœ€çµ‚ç¢ºèªã—ã¦ãã ã•ã„ã€‚ã“ã‚ŒãŒæœ€ã‚‚é‡è¦ã§ã™ã€‚

requirements.txt ã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹

ãƒ•ã‚¡ã‚¤ãƒ«å†…ã« file:///C:/... ã®ã‚ˆã†ãªWindowsã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‘ã‚¹ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã ã‘ãŒè¨˜è¼‰ã•ã‚ŒãŸã€ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
settings.py ã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹

ROOT_URLCONF = 'project.urls'
WSGI_APPLICATION = 'project.wsgi.application'
ä¸Šè¨˜ã®ã‚ˆã†ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåãŒ myproject ã§ã¯ãªãã€å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã§ã‚ã‚‹ project ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ï¼ˆä»¥å‰ã«æä¾›ã—ãŸæ”¹å–„ç‰ˆsettings.pyã§ã¯myprojectã«ãªã£ã¦ã„ãŸãŸã‚ã€ã“ã“ã‚’projectã«ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ï¼‰
Renderã®[Settings]ã‚’æœ€çµ‚ç¢ºèªã™ã‚‹

Build Command: sh build.sh
Start Command: gunicorn project.wsgi:application
myprojectã§ã¯ãªãã€projectã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒæœ€ã‚‚é‡è¦ã§ã™ã€‚
Environment Variables: SECRET_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
ã“ã®3ç‚¹ãŒæ­£ã—ã‘ã‚Œã°ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã¯æˆåŠŸã™ã‚‹ã¯ãšã§ã™ã€‚

ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚ˆã‚Šè‰¯ãã™ã‚‹ãŸã‚ã®æ”¹å–„
ãƒ‡ãƒ—ãƒ­ã‚¤ãŒæˆåŠŸã—ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒå…¬é–‹ã•ã‚ŒãŸå¾Œã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å“è³ªã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®æ”¹å–„ã«å–ã‚Šçµ„ã‚€ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

CSSã¨JavaScriptã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†é›¢ã™ã‚‹

index.htmlã«ç›´æ¥æ›¸ãè¾¼ã¾ãšã€staticãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¦style.cssã‚„script.jsã®ã‚ˆã†ãªå¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†é›¢ã—ã¾ã™ã€‚
ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã

calculator/tests.pyã«ã€è¨ˆç®—æ©Ÿèƒ½ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚
.envãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šã‚’ç®¡ç†ã™ã‚‹

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã®SECRET_KEYã‚„DEBUG=Trueã¨ã„ã£ãŸè¨­å®šã‚’.envãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã€settings.pyã‹ã‚‰èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¾ã™ã€‚
è¦ç´„:
ä»Šã™ãã‚„ã‚‹ã¹ãã“ã¨ã¯ã€Œã‚¹ãƒ†ãƒƒãƒ—1ã€ã®3é …ç›®ã®æœ€çµ‚ç¢ºèªã¨ä¿®æ­£ã§ã™ã€‚ ã“ã‚Œã§ã‚µã‚¤ãƒˆã¯å…¬é–‹ã•ã‚Œã¾ã™ã€‚ã‚µã‚¤ãƒˆãŒå‹•ã„ãŸã‚‰ã€ã„ã¤ã§ã‚‚ã€Œã‚¹ãƒ†ãƒƒãƒ—2ã€ã®æ”¹å–„ã«ç€æ‰‹ã§ãã¾ã™ã€‚






==> Uploading build...

Jun 15 10:15:12 PM



==> Uploaded in 13.9s. Compression took 3.6s

Jun 15 10:15:13 PM



==> Build successful ğŸ‰

Jun 15 10:15:19 PM



==> Deploying...

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 66, in run

Jun 15 10:15:53 PM



WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]", prog=prog).run()

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 235, in run

Jun 15 10:15:53 PM



super().run()

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 71, in run

Jun 15 10:15:53 PM



Arbiter(self).run()

Jun 15 10:15:53 PM



^^^^^^^^^^^^^

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 57, in __init__

Jun 15 10:15:53 PM



self.setup(app)

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 117, in setup

Jun 15 10:15:53 PM



self.app.wsgi()

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 66, in wsgi

Jun 15 10:15:53 PM



self.callable = self.load()

Jun 15 10:15:53 PM



^^^^^^^^^^^

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 57, in load

Jun 15 10:15:53 PM



return self.load_wsgiapp()

Jun 15 10:15:53 PM



^^^^^^^^^^^^^^^^^^^

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 47, in load_wsgiapp

Jun 15 10:15:53 PM



return util.import_app(self.app_uri)

Jun 15 10:15:53 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:15:53 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/util.py", line 370, in import_app

Jun 15 10:15:53 PM



mod = importlib.import_module(module)

Jun 15 10:15:53 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:15:53 PM



File "/opt/render/project/python/Python-3.12.4/lib/python3.12/importlib/__init__.py", line 90, in import_module

Jun 15 10:15:53 PM



return _bootstrap._gcd_import(name[level:], package, level)

Jun 15 10:15:53 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1310, in _find_and_load_unlocked

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 10:15:53 PM



File "<frozen importlib._bootstrap>", line 1324, in _find_and_load_unlocked

Jun 15 10:15:53 PM



ModuleNotFoundError: No module named 'myproject'

Jun 15 10:15:55 PM



==> Exited with status 1

Jun 15 10:15:55 PM



==> Common ways to troubleshoot your deploy: https://render.com/docs/troubleshooting-deploys

Jun 15 10:16:02 PM



==> Running 'gunicorn myproject.wsgi:application'

Jun 15 10:16:03 PM



Traceback (most recent call last):

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/bin/gunicorn", line 8, in <module>

Jun 15 10:16:03 PM



sys.exit(run())

Jun 15 10:16:03 PM



^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 66, in run

Jun 15 10:16:03 PM



WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]", prog=prog).run()

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 235, in run

Jun 15 10:16:03 PM



super().run()

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 71, in run

Jun 15 10:16:03 PM



Arbiter(self).run()

Jun 15 10:16:03 PM



^^^^^^^^^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 57, in __init__

Jun 15 10:16:03 PM



self.setup(app)

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 117, in setup

Jun 15 10:16:03 PM



self.app.wsgi()

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 66, in wsgi

Jun 15 10:16:03 PM



self.callable = self.load()

Jun 15 10:16:03 PM



^^^^^^^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 57, in load

Jun 15 10:16:03 PM



return self.load_wsgiapp()

Jun 15 10:16:03 PM



^^^^^^^^^^^^^^^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 47, in load_wsgiapp

Jun 15 10:16:03 PM



return util.import_app(self.app_uri)

Jun 15 10:16:03 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/src/.venv/lib/python3.12/site-packages/gunicorn/util.py", line 370, in import_app

Jun 15 10:16:03 PM



mod = importlib.import_module(module)

Jun 15 10:16:03 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:16:03 PM



File "/opt/render/project/python/Python-3.12.4/lib/python3.12/importlib/__init__.py", line 90, in import_module

Jun 15 10:16:03 PM



return _bootstrap._gcd_import(name[level:], package, level)

Jun 15 10:16:03 PM



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1310, in _find_and_load_unlocked

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

Jun 15 10:16:03 PM



File "<frozen importlib._bootstrap>", line 1324, in _find_and_load_unlocked

Jun 15 10:16:03 PM



ModuleNotFoundError: No module named 'myproject'




æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€å•é¡Œã¯æ®‹ã‚Šä¸€ã¤ã«çµã‚Šè¾¼ã¾ã‚Œã¾ã—ãŸã€‚

==> Build successful ğŸ‰ 

ã“ã‚Œã¯ç´ æ™´ã‚‰ã—ã„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã§ã™ã€‚requirements.txtã‚„settings.pyã®å•é¡Œã¯ã™ã¹ã¦è§£æ±ºã—ã¦ã„ã¾ã™ã€‚

ã‚¨ãƒ©ãƒ¼ã®ç›´æ¥çš„ãªåŸå› 
ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã€ãƒ­ã‚°ã«æ˜ç¢ºã«è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚

==> Running 'gunicorn myproject.wsgi:application' 

RenderãŒã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’èµ·å‹•ã—ã‚ˆã†ã¨ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸçµæœã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã§å¤±æ•—ã—ã¦ã„ã¾ã™ã€‚

ModuleNotFoundError: No module named 'myproject' 

ã“ã‚Œã¯ã€Renderã®ã€ŒStart Commandã€ã®è¨­å®šãŒã€ã„ã¾ã ã«å¤ã„ myproject ã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯ project ã§ã‚ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã¯èµ·å‹•ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãšã«ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã„ã¾ã™ã€‚

çµè«–ã¨æœ€çµ‚çš„ãªè§£æ±ºç­–
ã“ã‚Œã¯ã€ãŠå®¢æ§˜ã®ã‚³ãƒ¼ãƒ‰ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã®å•é¡Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Renderã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã®è¨­å®šã‚’1ãƒ¶æ‰€å¤‰æ›´ã™ã‚‹ã ã‘ã§è§£æ±ºã—ã¾ã™ã€‚

ä»¥ä¸‹ã®æ‰‹é †ã‚’å†åº¦ã”ç¢ºèªã®ä¸Šã€å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

Render.comã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ [Settings] ã‚’é¸æŠã—ã¾ã™ã€‚

ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã€ã€ŒStart Commandã€ ã¨ã„ã†å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ã‚’è¦‹ã¤ã‘ã¾ã™ã€‚

ãã®ãƒœãƒƒã‚¯ã‚¹ã«ç¾åœ¨ gunicorn myproject.wsgi:application ã¨å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹ã®ã‚’ã€å®Œå…¨ã«å‰Šé™¤ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ­£ç¢ºã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚

gunicorn project.wsgi:application

ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã«ã‚ã‚‹ [Save Changes] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€å¤‰æ›´ã‚’ä¿å­˜ã—ã¾ã™ã€‚

æœ€å¾Œã«ã€ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚ã‚‹ [Manual Deploy] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã€[Deploy latest commit] ã‚’é¸ã‚“ã§ã€æ‰‹å‹•ã§å†ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¾ã™ã€‚

ãƒ“ãƒ«ãƒ‰ã¯æ—¢ã«æˆåŠŸã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã®ã€ŒStart Commandã€ã®ä¿®æ­£ã ã‘ã§ã€ä»Šåº¦ã“ããƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãŒå…¬é–‹ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚


ã‚½ãƒ¼ã‚¹






Not Found

The requested resource was not found on this server.



æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¤º
ã“ã®ã€ŒNot Foundã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€ã“ã‚Œã¾ã§ã®ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ãªã„ã‚¨ãƒ©ãƒ¼ã¨ã¯å…¨ãç•°ãªã‚Šã€å®Ÿã¯æœ—å ±ã§ã™ï¼

ã“ã‚Œã¯ã€Œã‚µãƒ¼ãƒãƒ¼ï¼ˆgunicornï¼‰ã¯æ­£å¸¸ã«èµ·å‹•ã—ã€Djangoã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å‹•ä½œã‚’é–‹å§‹ã—ãŸã‚‚ã®ã®ã€ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸURLï¼ˆãƒ‘ã‚¹ï¼‰ã«å¯¾å¿œã™ã‚‹ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã€ã¨ã„ã†Djangoã‹ã‚‰ã®å¿œç­”ã§ã™ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ã¯æˆåŠŸã—ã¦ã„ã¾ã™ã€‚

ã‚¨ãƒ©ãƒ¼ã®åŸå› 
ãŠå®¢æ§˜ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸURLã¯ã€ãŠãã‚‰ãã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ«ãƒ¼ãƒˆURLï¼ˆä¾‹: https://ã‚ãªãŸã®ã‚µãƒ¼ãƒ“ã‚¹å.onrender.com/ï¼‰ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚

ã—ã‹ã—ã€ç¾åœ¨ã®Djangoã®URLè¨­å®šï¼ˆproject/urls.pyï¼‰ã§ã¯ã€/ ã¨ã„ã†ãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹ã«å¯¾å¿œã™ã‚‹ãƒšãƒ¼ã‚¸ã¯å®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è¨­å®šã¯ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

Python

# project/urls.py
urlpatterns = [
    path('admin/', admin.site.urls),
    # é›»å“ã‚¢ãƒ—ãƒªã¯ 'calculator/' ã¨ã„ã†ãƒ‘ã‚¹ã®ä¸‹ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
    path('calculator/', include('calculator.urls')),
]
ã“ã®è¨­å®šã¯ã€ã€Œ.../calculator/ ã¨ã„ã†URLã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã£ãŸå ´åˆã«ã®ã¿ã€calculatorã‚¢ãƒ—ãƒªã«å‡¦ç†ã‚’æ¸¡ã™ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚

è§£æ±ºç­–ï¼šæ­£ã—ã„URLã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹
ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã§ã€URLã®æœ«å°¾ã« /calculator/ ã‚’è¿½åŠ ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚

æ­£ã—ã„URL:
https://ã‚ãªãŸã®ã‚µãƒ¼ãƒ“ã‚¹å.onrender.com/calculator/

ã“ã‚Œã§ã€ä½œæˆã—ãŸé›»å“ã®ãƒšãƒ¼ã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

ã€ä»Šå¾Œã®æ”¹å–„æ¡ˆã€‘ãƒ«ãƒ¼ãƒˆURLã§é›»å“ã‚’è¡¨ç¤ºã—ãŸã„å ´åˆ
ã‚‚ã—ã€.../calculator/ã§ã¯ãªãã€ãƒ«ãƒ¼ãƒˆURLï¼ˆhttps://ã‚ãªãŸã®ã‚µãƒ¼ãƒ“ã‚¹å.onrender.com/ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã ã‘ã§é›»å“ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã•ã›ãŸã„å ´åˆã¯ã€project/urls.pyã‚’ä¸€è¡Œä¿®æ­£ã™ã‚‹ã ã‘ã§ã™ã€‚

1. project/urls.pyã‚’ä¿®æ­£ã™ã‚‹

ç¾åœ¨ã®è¨­å®šï¼š

Python

# project/urls.py
path('calculator/', include('calculator.urls')),
ä¿®æ­£å¾Œã®è¨­å®šï¼š

Python

# project/urls.py
# 'calculator/' ã‚’ '' ã«å¤‰æ›´ã™ã‚‹
path('', include('calculator.urls')),
2. å¤‰æ›´ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹
ã“ã®ä¿®æ­£ã‚’ä¿å­˜ã—ã€GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚Œã°ã€RenderãŒè‡ªå‹•ã§å†ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã„ã€æ¬¡ã‹ã‚‰ã¯ãƒ«ãƒ¼ãƒˆURLã§ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã¾ãšã¯ã€ç¾åœ¨ã®æ­£ã—ã„URL (.../calculator/)ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ã”ç¢ºèªãã ã•ã„ã€‚